name: Simple video transcoding

input: 
  - name: video
    value: /path/to/input.mov
    required: true
    
tasks: 
  - name: Generate a random alpahnumeric string
    handler: random
    mode: alpahnumeric
    returns: randomString

  - name: Create a temporary directory
    handler: mkdir
    path: ${tmpdir}/${randomString}
    returns: workDir

  - name: Transcode the video
    handler: ffmpeg
    input: ${video}
    preset: video_only
    output: ${workDir}/video.mp4

  - name: Transcode the audio
    handler: ffmpeg
    input: ${video}
    preset: audio_only
    output: ${workDir}/audio.mp4
    
  - name: Mux the audio and video
    handler: ffmpeg
    input: 
           - ${workDir}/video.mp4
           - ${workDir}/audio.mp4
    preset: mux
    output: ${workDir}/final.mp4
    
    