label: Hello Split and Stitch
    
tasks:          

  - name: input
    type: var
    value: "/Users/cohee016/Videos/1430172780908.mp4"

  - name: chunks
    type: vsplit
    input: ${input} 
    chunkSize: 10s
    
  - name: chunks
    type: map
    list: ${chunks}
    iteratee:
      type: var
      value: 
        start: ${item.start}
        end: ${item.end}
        output: /tmp/chunk_${itemIndex}.mp4
        
  - type: each
    list: ${chunks}
    iteratee: 
      type: ffmpeg
      options: [
        "-y",
        "-ss", "${item.start}",
        "-i", "${input}",
        "-to","${item.end}",
        "${item.output}"
      ]
  
  - name: chunkPaths
    type: map
    list: ${chunks}
    iteratee: 
      type: var
      value: ${item.output}
     
  - type: vstitch
    chunks: ${chunkPaths}
    output: "/tmp/final.mp4"
    